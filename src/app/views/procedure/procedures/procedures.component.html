<div class="row">
    <div class="col-md-12 p-0 mb-3">
        <p-breadcrumb [model]="items" [home]="home"></p-breadcrumb>
    </div>
</div>

<!-- <div class="row">
    <div class="col-md-12 p-0">
        <p-card>
            <ng-template pTemplate="header">
                <div class="row">
                    <div class="col-md-6 pl-0 my-auto">
                        <h4 class="m-0">Lista de procedimentos</h4>
                    </div>
                    <div class="col-md-6 pr-0 text-right">
                        <p-button type="button" class="btn-primary-hc" label="Adicionar procedimento" icon="pi pi-plus" [routerLink]="['/procedures/new']"></p-button>
                    </div>
                </div>
            </ng-template>
        <p-table [columns]="cols" [value]="procedures" styleClass="p-datatable-responsive" dataKey="id">
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th *ngFor="let col of columns">
                        {{col.header}}
                    </th>
                    <th class="col-actions text-center">Ações</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns">
                <tr [pEditableRow]="rowData">
                    <td *ngFor="let col of columns">
                        <div *ngIf="col.subfield; then nested_object_content else normal_content"></div>
                        <ng-template #nested_object_content>
                        {{rowData[col.field][col.subfield]}}
                        </ng-template>
                        <ng-template #normal_content>
                        {{rowData[col.field]}}
                        </ng-template>
                    </td>
                    <td class="col-actions text-center">
                        <button (click)="editProcedure(rowData['id'])" pButton pRipple title="Editar" type="button" icon="pi pi-pencil" class="p-button-rounded p-button-text p-button-secondary"></button>
                        <button (click)="confirmDelete(rowData['id'])" pButton pRipple title="Excluir" type="button" icon="pi pi-trash" class="p-button-rounded p-button-text p-button-danger"></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </p-card>
    </div>
</div> -->

<div class="row">
    <div class="col-md-12 p-0">
        <p-card>
            <ng-template pTemplate="header">
                <div class="row">
                    <div class="col-12 col-md-6 title my-auto">
                        <h4 class="m-0">Lista de procedimentos</h4>
                    </div>
                    <div class="col-12 col-md-6 buttons">
                        <button type="button" pButton pRipple icon="pi pi-refresh" (click)="refresh()" class="p-button-sm p-mr-2"  pTooltip="Atualizar lista" tooltipPosition="left"></button>
                        <button type="button" pButton pRipple icon="pi pi-file-pdf" (click)="exportPdf()" class="p-button-danger p-button-sm p-mr-2"  pTooltip="Exportar dados para XLS" tooltipPosition="left"></button>
                        <button type="button" pButton pRipple icon="pi pi-file-excel" (click)="exportExcel()" class="p-button-success p-button-sm p-mr-2"  pTooltip="Exportar dados para XLS" tooltipPosition="left"></button>
                        <button type="button" pButton pRipple icon="pi pi-plus" [routerLink]="['/procedures/new']" class="btn-primary-hc p-button-sm" pTooltip="Adicionar procedimento" tooltipPosition="left"></button>
                    </div>
                </div>
            </ng-template>
           <p-table [columns]="cols" [value]="procedures" [responsive]="true">
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th *ngFor="let col of cols">
                        {{col.header}}
                    </th>
                    <th class="col-actions text-center">Ações</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns">
                <tr>
                    <td *ngFor="let col of columns" [title]="rowData[col.field]">
                        <span class="p-column-title">{{col.header}}</span>
                        {{rowData[col.field]}}
                    </td>
                    <td class="col-actions text-center">
                        <button (click)="editProcedure(rowData['id'])" pButton pRipple type="button" pTooltip="Editar" tooltipPosition="left" icon="pi pi-pencil" class="p-button-rounded p-button-text p-button-secondary"></button>
                        <button (click)="confirmDelete(rowData['id'])" pButton pRipple type="button" pTooltip="Excluir" tooltipPosition="left" icon="pi pi-trash" class="p-button-rounded p-button-text p-button-danger"></button>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="summary">
                <p-paginator class="d-none d-md-block" [first]="first" [rows]="rows" [totalRecords]="totalRecords" [rowsPerPageOptions]="rowsPerPageOptions" [pageLinkSize]="4" (onPageChange)="paginate($event)"></p-paginator>
                <p-paginator class="d-block d-md-none" [first]="first" [rows]="rows" [totalRecords]="totalRecords" (onPageChange)="paginate($event)" [showFirstLastIcon]="false" [showJumpToPageDropdown]="true" [showPageLinks]="false" currentPageReportTemplate="{currentPage} de {totalPages}"></p-paginator>
            </ng-template>
        </p-table>
    </p-card>
    </div>
</div>

<p-confirmDialog [style]="{width: '400px'}" [baseZIndex]="5000"></p-confirmDialog>
